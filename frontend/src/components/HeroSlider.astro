---
import "@splidejs/splide/dist/css/splide.min.css";
import LinkCta from "./LinkCta.astro";
import ArrowRightIcon from "./icons/ArrowRightIcon.astro";

const infoHero = Astro.props.data;
if(!infoHero || infoHero.length === 0) return null  

---

<section class="splide h-fit md:h-[400px]">
  <div class="splide__track">
    <ul class="splide__list">
      {
        infoHero.map((info: any) => (
           <li
              class="splide__slide bg-cover bg-center h-full md:h-[400px] bg-green-700"
              style={`background-image: url('${info.image.url}')`}>
              <div class="px-4 py-20 flex h-full items-center justify-center text-white bg-green-700/30">
                <div class="container text-center flex flex-col items-center">
                  <h2 class="text-2xl md:text-5xl font-bold text-shadow-2xs">{info.heading}</h2>
                  <p class="my-4 mx-6 mx-text-sm text-shadow-neutral-700 md:text-xl max-w-4xl">
                    {info.text}
                  </p>
                   {
                     info.cta &&
                     <LinkCta href={info.cta.href} label={info.cta.label}>
                       <ArrowRightIcon class="h-6 w-6 ml-2" />
                     </LinkCta>
                   }
                </div>
              </div>
            </li>
        ))
      }
     
    </ul>
  </div>
</section>

<script>
  import Splide from "@splidejs/splide";

  new Splide(".splide", {
    type: "loop",
    autoplay: true,
    perPage: 1,
  }).mount();
</script>
